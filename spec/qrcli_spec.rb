require 'spec_helper'
require_relative "../lib/qrcli.rb"

context "Simple test" do
  Given(:text) { "https://rubygems.org/gems/qrcli" }
  When(:qr) { Qrcli::QR.minimal(text, :level => 'l') }
  Given(:rqr) { RQRCode::QRCode.new(text, size: 2, level: "l" ) }
  Then { qr.qr.modules == rqr.modules }
  And { qr.options[:size] == 2 }
  And { qr.text == text }

  describe "format" do
    Given(:formatted) { Marshal.load "\x04\bI\"\x02\xE5\x14\e[107m                                                      \e[40m\n\e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[40m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[107m  \e[40m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[107m  \e[40m  \e[107m  \e[0m\n\e[107m                                                      \e[40m\x06:\x06ET"}
    When { qr.format }
    Then { qr.format == formatted }
  end
end